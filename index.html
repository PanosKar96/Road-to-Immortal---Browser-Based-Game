<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Responsive on mobile -->
    <title>Road to Immortal</title>
    <link rel="icon" type="image/x-icon" href="assets/images/titles/Title-icon.ico" />
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Link to custom CSS file -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-dark text-light">

<!-- Each view has its own container, separate and unique -->

<!-- Start view -->
<div id="view-start" class="container-fluid text-center">
  <h1 class="bg-title">Road to Immortal</h1>
  <div class="position-relative h-100">
    <!-- Play button -->
    <div class="position-absolute top-50 start-50 translate-middle">
      <button id="btn-play" class="btn-play" onclick="showView('view-characters')">
        <img src="assets/images/icons/play_button.png" class="play-btn-image" alt="Play">
      </button>
    </div>

    <!-- Best player panel -->
    <div id="best-player" class="score-panel position-absolute bottom-0 end-0 m-3">
      <h4>Best Score: <span id="best-score">0</span></h4>
      <p>Player: <span id="best-name">---</span></p>
    </div>
  </div>
</div>

<!-- Character selection view -->
<div id="view-characters" class="container-fluid p-0">
  <div id="character-container"></div>
</div>

<!-- Map view (hidden initially) -->
<div id="map-container" hidden>
  <div id="map-border">
    <img src="assets/images/levels/level1_unlocked.png" usemap="#level_big" id="lvl-map-img" alt="Map">
  </div>

  <!-- Image map for the first image (1536×1024) -->
  <map name="level_big" id="level_big">
    <!-- Level 1 (Dire Creep Wave) -->
    <area
      id="one"
      href="#"
      shape="circle"
      coords="300,800,140"
      alt="Dire Creep Wave"
      title="Dire Creep Wave"
      onclick="selectLevel(0, event)"
    />
    <!-- Level 2 (The Primal Beast) -->
    <area
      id="two"
      href="#"
      shape="circle"
      coords="650,450,140"
      alt="The Primal Beast"
      title="The Primal Beast"
      onclick="selectLevel(1, event)"
    />
    <!-- Level 3 (Roshan, The Immortal) -->
    <area
      id="three"
      href="#"
      shape="circle"
      coords="1100,300,140"
      alt="Roshan, The Immortal"
      title="Roshan, The Immortal"
      onclick="selectLevel(2, event)"
    />
  </map>

  <!-- Image map for the second and third images (1024×1024) -->
  <map name="level_small" id="level_small">
    <!-- Level 1 (Dire Creep Wave) -->
    <area
      id="one"
      href="#"
      shape="circle"
      coords="150,650,110"
      alt="Dire Creep Wave"
      title="Dire Creep Wave"
      onclick="selectLevel(0, event)"
    />
    <!-- Level 2 (The Primal Beast) -->
    <area
      id="two"
      href="#"
      shape="circle"
      coords="475,425,110"
      alt="The Primal Beast"
      title="The Primal Beast"
      onclick="selectLevel(1, event)"
    />
    <!-- Level 3 (Roshan, The Immortal) -->
    <area
      id="three"
      href="#"
      shape="circle"
      coords="750,260,110"
      alt="Roshan, The Immortal"
      title="Roshan, The Immortal"
      onclick="selectLevel(2, event)"
    />
  </map>
</div>

<!-- Battle view (hidden initially) -->
<div id="view-battle" class="container-fluid p-0" hidden>
  <div id="game-container"><!-- Battle UI goes here --></div>
  <div id="battle-logs">
    <img src="assets/images/backgrounds/bg-logs.png" class="log-bg" alt="Logs Frame">
  </div>
</div>

<!-- Level win view -->
<div id="view-win" hidden>
  <img id="win-image" src="" alt="Victory Image">
  <h1 id="win-message" class="display-4 text-warning"></h1>
  <button id="btn-continue" class="btn btn-primary mt-3">Continue</button>
</div>

<!-- Aegis reward view -->
<div id="view-aegis" class="container text-center" hidden>
  <div class="dota-panel p-4">
    <img src="assets/images/icons/aegis.png" class="aegis-item mb-4" alt="Aegis Icon">
    <h3 class="text-gold">You claimed the Aegis!</h3>
    <input type="text" id="aegis-player-name" class="form-control w-50 mx-auto my-3"
           placeholder="Enter your name" maxlength="20">
    <button id="btn-aegis-submit" class="btn btn-warning">Submit</button>
  </div>
</div>

<!-- Game over view -->
<div id="view-gameover" class="container text-center" hidden>
  <div class="dota-panel p-4">
    <h1 id="gameover-message" class="text-warning mb-4"></h1>
    <input type="text" id="player-name" class="form-control mb-3"
           placeholder="Enter your name" maxlength="20">
    <button id="btn-submit-score" class="btn btn-warning">Submit Score</button>
  </div>
</div>

<!-- Include image-map-resizer library -->
<script src="assets/js/imageMapResizer.min.js"></script>

<!-- Include Bootstrap JS bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Link to custom JavaScript file -->
<script src="script.js"></script>
<script>
  // Called when the player clicks on a level area
  function selectLevel(lvlIndex, evt) {
    evt = evt || window.event;
    console.log("selectLevel", lvlIndex);
    evt.preventDefault();

    if (levels[lvlIndex].completed) {
      alert("You've already won this level!");
      return false;
    }
    if (levels[lvlIndex].locked) {
      alert("Complete previous levels first");
      return false;
    }
    currentLevel = lvlIndex;
    showView("view-battle");
    startLevel();
    return false;
  }

  // Initial setup of views
  showView('view-start');
  renderCharacterSelection();
</script>
</body>
</html>
